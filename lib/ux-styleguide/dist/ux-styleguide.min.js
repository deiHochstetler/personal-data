!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.LoaderBtn=t()}(this,function(){"use strict";function e(e){if("undefined"==typeof e)return void console.warn("Loader button target must be defined.");if(/loader-button/i.test(e.className)||(e.className+=" loader-button"),e.hasAttribute("data-style")||e.setAttribute("data-style","expand-right"),!e.querySelector(".load-label")){var t=document.createElement("span");t.className="load-label",i(e,t)}var r,n={start:function(t){return d=t,e.setAttribute("disabled",""),e.setAttribute("data-loading",""),clearTimeout(r),e.hasAttribute("indeterminate")?this.startIndeterminate(0):this.setProgress(0),this},startAfter:function(e){return clearTimeout(r),r=setTimeout(function(){n.start()},e),this},stop:function(){return e.removeAttribute("disabled"),e.removeAttribute("data-loading"),clearTimeout(r),e.hasAttribute("indeterminate")&&this.stopIndeterminate(),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(t){t=Math.max(Math.min(t,1),0);var r=e.querySelector(".load-msg"),n=e.querySelector(".progress"),a=e.querySelector(".progress-bg");if(0===t&&n&&n.parentNode)n.parentNode.removeChild(n),a&&a.parentNode.removeChild(a);else{if(r||(r=document.createElement("span"),r.className="load-msg",r.innerHTML=d,e.appendChild(r)),n||(n=document.createElement("div"),n.className="progress",e.appendChild(n)),!a){var o=document.createElement("div");o.className="progress-bg",e.appendChild(o)}n.style.width=(t||0)*e.offsetWidth+"px"}},startIndeterminate:function(){var t=e.querySelector(".load-msg");t||(t=document.createElement("span"),t.className="load-msg",t.innerHTML=d,e.appendChild(t));var r=e.querySelector(".progress-line");r||(r=document.createElement("div"),r.className="progress-line",e.appendChild(r))},stopIndeterminate:function(){var t=e.querySelector(".progress-line");t&&t.parentNode.removeChild(t)},enable:function(){return this.stop(),this},disable:function(){return this.stop(),e.setAttribute("disabled",""),this},isLoading:function(){return e.hasAttribute("data-loading")},remove:function(){clearTimeout(r),e.removeAttribute("disabled",""),e.removeAttribute("data-loading","");for(var t=0,a=s.length;t<a;t++)if(n===s[t]){s.splice(t,1);break}}};return s.push(n),n}function t(e,t){for(;e.parentNode&&e.tagName!==t;)e=e.parentNode;return t===e.tagName?e:void 0}function r(e){for(var t=["input","textarea","select"],r=[],n=0;n<t.length;n++)for(var a=e.getElementsByTagName(t[n]),o=0;o<a.length;o++)a[o].hasAttribute("required")&&r.push(a[o]);return r}function n(n,a){a=a||{};var i=[];"string"==typeof n?i=o(document.querySelectorAll(n)):"object"==typeof n&&"string"==typeof n.nodeName&&(i=[n]);for(var s=0,d=i.length;s<d;s++)!function(){var n=i[s];if("function"==typeof n.addEventListener){var o=e(n),d=-1;n.addEventListener("click",function(e){var i=!0,s=t(n,"FORM");if("undefined"!=typeof s)if("function"==typeof s.checkValidity)i=s.checkValidity();else for(var l=r(s),u=0;u<l.length;u++)""===l[u].value.replace(/^\s+|\s+$/g,"")&&(i=!1),"checkbox"!==l[u].type&&"radio"!==l[u].type||l[u].checked||(i=!1),"email"===l[u].type&&(i=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(l[u].value));i&&(o.startAfter(1),"number"==typeof a.timeout&&(clearTimeout(d),d=setTimeout(o.stop,a.timeout)),"function"==typeof a.callback&&a.callback.apply(null,[o]))},!1)}}()}function a(){for(var e=0,t=s.length;e<t;e++)s[e].stop()}function o(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t}function i(e,t){var r=document.createRange();r.selectNodeContents(e),r.surroundContents(t),e.appendChild(t)}var s=[],d="foo";return{bind:n,create:e,stopAll:a}});